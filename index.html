<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 í•´ì™¸ê±°ë˜ì„  ê´€ë¦¬ ì‹œìŠ¤í…œ - ê´€ë¦¬ì</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .modal-active { display: flex !important; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">

    <div id="app" class="flex min-h-screen relative">
        <!-- Toast Notification -->
        <div id="toast" class="fixed bottom-5 right-5 z-[100] bg-slate-800 text-white px-6 py-3 rounded-xl shadow-2xl transform translate-y-20 opacity-0 transition-all duration-300"></div>

        <!-- Sidebar -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 w-64 bg-slate-900 text-white p-6 shadow-xl z-50 transform -translate-x-full transition-transform duration-300 lg:relative lg:translate-x-0">
            <div class="flex items-center justify-between mb-10 px-2">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-blue-500 rounded-lg">
                        <i data-lucide="globe" class="w-6 h-6 text-white"></i>
                    </div>
                    <span class="text-xl font-bold tracking-tight">Global CRM</span>
                </div>
                <button class="lg:hidden" onclick="toggleSidebar(false)">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <nav class="space-y-2 flex-1">
                <button class="flex items-center gap-3 w-full p-3 rounded-xl bg-blue-600 text-white font-medium transition-all">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i> ëŒ€ì‹œë³´ë“œ
                </button>
                <button class="flex items-center gap-3 w-full p-3 rounded-xl hover:bg-slate-800 text-slate-400 hover:text-white transition-all">
                    <i data-lucide="users" class="w-5 h-5"></i> ê±°ë˜ì²˜ ê´€ë¦¬
                </button>
                <button class="flex items-center gap-3 w-full p-3 rounded-xl hover:bg-slate-800 text-slate-400 hover:text-white transition-all">
                    <i data-lucide="trending-up" class="w-5 h-5"></i> ë§¤ì¶œ ë¶„ì„
                </button>
            </nav>

            <div class="mt-10 p-4 bg-slate-800 rounded-2xl">
                <p class="text-xs text-slate-400 mb-1">ì‹œìŠ¤í…œ ìƒíƒœ</p>
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-sm font-medium">ê´€ë¦¬ì ì„¸ì…˜ í™œì„±</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 w-full overflow-x-hidden p-4 md:p-8">
            <header class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                <div class="flex items-center gap-4">
                    <button class="lg:hidden p-2 bg-white border border-slate-200 rounded-lg shadow-sm" onclick="toggleSidebar(true)">
                        <i data-lucide="menu" class="w-5 h-5"></i>
                    </button>
                    <div>
                        <h1 class="text-2xl font-bold text-slate-800">2026 í•´ì™¸ê±°ë˜ì„  ê´€ë¦¬</h1>
                        <p class="text-slate-500 text-sm">ë°ì´í„° ì—…ë¡œë“œ ë° ìˆ˜ì • ì‹œìŠ¤í…œ</p>
                    </div>
                </div>
                
                <div class="flex items-center gap-4">
                    <!-- Admin Toggle -->
                    <div class="flex items-center gap-2 bg-white border border-slate-200 px-3 py-1.5 rounded-xl shadow-sm">
                        <span class="text-xs font-bold text-slate-500">ADMIN</span>
                        <button id="adminToggle" onclick="toggleAdminMode()" class="w-10 h-5 bg-slate-200 rounded-full relative transition-colors duration-200">
                            <div id="toggleDot" class="absolute left-1 top-1 w-3 h-3 bg-white rounded-full transition-transform duration-200"></div>
                        </button>
                    </div>

                    <div class="flex items-center gap-3">
                        <button onclick="openModal()" id="addBtn" class="hidden flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg shadow-sm text-sm font-medium hover:bg-blue-700 transition-colors">
                            <i data-lucide="plus" class="w-4 h-4"></i> ìƒˆ ê±°ë˜ì²˜ ë“±ë¡
                        </button>
                        <div class="w-10 h-10 bg-slate-200 rounded-full overflow-hidden border-2 border-white shadow-sm">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="User">
                        </div>
                    </div>
                </div>
            </header>

            <!-- Stats Grid -->
            <div id="statsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8"></div>

            <!-- Table Container -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="p-4 md:p-6 border-b border-slate-100 flex flex-col xl:flex-row gap-4 justify-between items-center">
                    <div class="flex bg-slate-100 p-1 rounded-xl w-full xl:w-auto" id="tabContainer">
                        <button onclick="updateTab('all')" id="tab-all" class="px-6 py-2 rounded-lg text-sm font-medium transition-all bg-white text-blue-600 shadow-sm">ì „ì²´</button>
                        <button onclick="updateTab('existing')" id="tab-existing" class="px-6 py-2 rounded-lg text-sm font-medium transition-all text-slate-500 hover:text-slate-700">ê¸°ì¡´</button>
                        <button onclick="updateTab('new')" id="tab-new" class="px-6 py-2 rounded-lg text-sm font-medium transition-all text-slate-500 hover:text-slate-700">ì‹ ê·œ</button>
                    </div>

                    <div class="flex flex-col sm:flex-row items-center gap-3 w-full xl:w-auto">
                        <div class="relative w-full sm:w-64">
                            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"></i>
                            <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥..." class="w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none" oninput="handleSearch(this.value)">
                        </div>
                    </div>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse min-w-[1000px]">
                        <thead>
                            <tr class="bg-slate-50/50 text-slate-500 text-xs font-semibold uppercase tracking-wider">
                                <th class="px-6 py-4">êµ­ê°€ / ì§€ì—­</th>
                                <th class="px-6 py-4">ë°”ì´ì–´ ì •ë³´</th>
                                <th class="px-6 py-4 text-right">ë§¤ì¶œ (USD)</th>
                                <th class="px-6 py-4">ì¸ì¦ / ê·œì œ</th>
                                <th class="px-6 py-4">ìƒíƒœ</th>
                                <th id="adminHeader" class="px-6 py-4 text-center hidden">ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody" class="divide-y divide-slate-100"></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for Add/Edit -->
    <div id="editModal" class="fixed inset-0 bg-slate-900/60 z-[100] hidden items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-xl overflow-hidden animate-in fade-in zoom-in duration-200">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <h3 id="modalTitle" class="text-xl font-bold text-slate-800">ìƒˆ ê±°ë˜ì²˜ ì •ë³´ ì…ë ¥</h3>
                <button onclick="closeModal()" class="p-2 hover:bg-slate-200 rounded-full transition-colors"><i data-lucide="x"></i></button>
            </div>
            <form id="dataForm" class="p-6 space-y-4">
                <input type="hidden" id="editIndex">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">êµ­ê°€ (ì˜ˆ: ğŸ‡ºğŸ‡¸ ë¯¸êµ­)</label>
                        <input type="text" id="formCountry" required class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">ì§€ì—­</label>
                        <select id="formRegion" class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                            <option>ë™ì•„ì‹œì•„</option>
                            <option>ë¶ì•„ë©”ë¦¬ì¹´</option>
                            <option>ìœ ëŸ½</option>
                            <option>ì˜¤ì„¸ì•„ë‹ˆì•„</option>
                            <option>ì•„ì‹œì•„</option>
                            <option>ë‚¨ì•„ë©”ë¦¬ì¹´</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">ë„ì‹œ</label>
                        <input type="text" id="formCity" class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">ë°”ì´ì–´ëª…</label>
                        <input type="text" id="formBuyer" required class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">ë§¤ì¶œì•¡ (USD)</label>
                        <input type="number" id="formSales" step="0.01" class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">ë‹´ë‹¹ì/ìœ í˜•</label>
                        <input type="text" id="formContact" placeholder="ì„±í•¨ (ìœ í˜•)" class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">ì¸ì¦ ì •ë³´</label>
                        <input type="text" id="formCert" class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">ìƒíƒœ</label>
                        <select id="formStatus" class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="Existing">ê¸°ì¡´(í™œì„±)</option>
                            <option value="New">ì‹ ê·œ</option>
                        </select>
                    </div>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeModal()" class="flex-1 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors">ì·¨ì†Œ</button>
                    <button type="submit" class="flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all">ì €ì¥í•˜ê¸°</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // --- Initial & Storage Data ---
        const defaultData = [
            { region: 'ë™ì•„ì‹œì•„', country: 'CN ì¤‘êµ­', city: 'ìƒí•´', sales25: 24888.93, cert: 'NMPA Filing', buyer: 'KC ì´ë„ˆë²¨ë¼', contact: 'ì–‘ìŠ¹ë£¡(í•œêµ­ì¸)', status: 'Existing' },
            { region: 'ë¶ì•„ë©”ë¦¬ì¹´', country: 'ğŸ‡ºğŸ‡¸ ë¯¸êµ­', city: 'LA', sales25: 5144.9, cert: 'FDA', buyer: 'RELAXATION headspa', contact: 'ê¹€í¬ì • Astrid', status: 'Existing' },
            { region: 'ì˜¤ì„¸ì•„ë‹ˆì•„', country: 'ğŸ‡¦ğŸ‡º í˜¸ì£¼', city: 'ì‹œë“œë‹ˆ', sales25: 23363, cert: 'MoH', buyer: 'NKM SOLUTIONS', contact: 'ê¹€ë‚¨ì€ Nicky', status: 'Existing' },
            { region: 'ìœ ëŸ½', country: 'ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤', city: 'Paris', sales25: 1200, cert: 'CPNP', buyer: 'Les Divas', contact: 'FRA Yhssene', status: 'Existing' },
            { region: 'ì•„ì‹œì•„', country: 'íƒœêµ­', city: 'ë°©ì½•', sales25: 0, cert: 'FDA e-Noti', buyer: 'Thai Beauty', contact: 'Partner A', status: 'New' }
        ];

        let mockData = JSON.parse(localStorage.getItem('crm_data')) || defaultData;

        let state = {
            isAdmin: false,
            searchTerm: '',
            activeTab: 'all'
        };

        // --- Core Functions ---
        function saveToStorage() {
            localStorage.setItem('crm_data', JSON.stringify(mockData));
            render();
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        function toggleAdminMode() {
            state.isAdmin = !state.isAdmin;
            const dot = document.getElementById('toggleDot');
            const btn = document.getElementById('adminToggle');
            const addBtn = document.getElementById('addBtn');
            const adminHeader = document.getElementById('adminHeader');
            
            if (state.isAdmin) {
                dot.style.transform = 'translateX(20px)';
                btn.classList.replace('bg-slate-200', 'bg-blue-500');
                addBtn.classList.remove('hidden');
                adminHeader.classList.remove('hidden');
                showToast("ê´€ë¦¬ì ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
            } else {
                dot.style.transform = 'translateX(0)';
                btn.classList.replace('bg-blue-500', 'bg-slate-200');
                addBtn.classList.add('hidden');
                adminHeader.classList.add('hidden');
            }
            render();
        }

        function handleSearch(val) {
            state.searchTerm = val;
            render();
        }

        function updateTab(tab) {
            state.activeTab = tab;
            ['all', 'existing', 'new'].forEach(t => {
                const el = document.getElementById(`tab-${t}`);
                if (t === tab) {
                    el.className = "px-6 py-2 rounded-lg text-sm font-medium transition-all bg-white text-blue-600 shadow-sm";
                } else {
                    el.className = "px-6 py-2 rounded-lg text-sm font-medium transition-all text-slate-500 hover:text-slate-700";
                }
            });
            render();
        }

        // --- Modal Logic ---
        function openModal(index = -1) {
            const modal = document.getElementById('editModal');
            const form = document.getElementById('dataForm');
            const title = document.getElementById('modalTitle');
            
            form.reset();
            document.getElementById('editIndex').value = index;

            if (index > -1) {
                const item = mockData[index];
                title.innerText = "ê±°ë˜ì²˜ ì •ë³´ ìˆ˜ì •";
                document.getElementById('formCountry').value = item.country;
                document.getElementById('formRegion').value = item.region;
                document.getElementById('formCity').value = item.city;
                document.getElementById('formBuyer').value = item.buyer;
                document.getElementById('formSales').value = item.sales25;
                document.getElementById('formContact').value = item.contact;
                document.getElementById('formCert').value = item.cert;
                document.getElementById('formStatus').value = item.status;
            } else {
                title.innerText = "ìƒˆ ê±°ë˜ì²˜ ë“±ë¡";
            }
            
            modal.classList.add('modal-active');
            lucide.createIcons();
        }

        function closeModal() {
            document.getElementById('editModal').classList.remove('modal-active');
        }

        document.getElementById('dataForm').onsubmit = (e) => {
            e.preventDefault();
            const idx = parseInt(document.getElementById('editIndex').value);
            const newData = {
                country: document.getElementById('formCountry').value,
                region: document.getElementById('formRegion').value,
                city: document.getElementById('formCity').value,
                buyer: document.getElementById('formBuyer').value,
                sales25: parseFloat(document.getElementById('formSales').value || 0),
                contact: document.getElementById('formContact').value,
                cert: document.getElementById('formCert').value,
                status: document.getElementById('formStatus').value
            };

            if (idx > -1) {
                mockData[idx] = newData;
                showToast("ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            } else {
                mockData.unshift(newData);
                showToast("ìƒˆ ê±°ë˜ì²˜ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }

            saveToStorage();
            closeModal();
        };

        function deleteItem(idx) {
            if(confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                mockData.splice(idx, 1);
                saveToStorage();
                showToast("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        }

        // --- Render Functions ---
        function renderStats(filtered) {
            const total = filtered.reduce((acc, c) => acc + c.sales25, 0);
            const grid = document.getElementById('statsGrid');
            const stats = [
                { label: 'í•„í„°ë§ ë§¤ì¶œ', value: `$${total.toLocaleString()}`, color: 'bg-blue-50', icon: 'dollar-sign' },
                { label: 'ì „ì²´ ê±°ë˜ì²˜', value: mockData.length, color: 'bg-emerald-50', icon: 'users' },
                { label: 'ì‹ ê·œ íƒ€ê²Ÿ', value: mockData.filter(d => d.status === 'New').length, color: 'bg-amber-50', icon: 'zap' },
                { label: 'ì§€ì—­ ë¶„í¬', value: [...new Set(mockData.map(d => d.region))].length, color: 'bg-purple-50', icon: 'map' }
            ];

            grid.innerHTML = stats.map(s => `
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                    <div class="flex items-center gap-4 mb-2">
                        <div class="p-2 rounded-lg ${s.color}"><i data-lucide="${s.icon}" class="w-5 h-5 text-slate-700"></i></div>
                        <span class="text-slate-500 text-sm font-medium">${s.label}</span>
                    </div>
                    <p class="text-2xl font-bold">${s.value}</p>
                </div>
            `).join('');
        }

        function render() {
            const filtered = mockData.filter(item => {
                const search = state.searchTerm.toLowerCase();
                const matchesSearch = item.country.toLowerCase().includes(search) || item.buyer.toLowerCase().includes(search);
                const matchesTab = state.activeTab === 'all' || (state.activeTab === 'existing' && item.status === 'Existing') || (state.activeTab === 'new' && item.status === 'New');
                return matchesSearch && matchesTab;
            });

            renderStats(filtered);

            const tbody = document.getElementById('dataTableBody');
            tbody.innerHTML = filtered.map((item, fIdx) => {
                // ì›ë³¸ ì¸ë±ìŠ¤ ì°¾ê¸° (ì‚­ì œ/ìˆ˜ì •ìš©)
                const originalIdx = mockData.indexOf(item);
                
                return `
                    <tr class="hover:bg-slate-50/80 transition-colors group">
                        <td class="px-6 py-4">
                            <div class="font-semibold text-slate-800">${item.country}</div>
                            <div class="text-xs text-slate-500">${item.region} â€¢ ${item.city}</div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="text-sm font-medium">${item.buyer}</div>
                            <div class="text-xs text-slate-400">${item.contact}</div>
                        </td>
                        <td class="px-6 py-4 text-right font-bold text-slate-900">$${item.sales25.toLocaleString()}</td>
                        <td class="px-6 py-4">
                            <span class="text-xs font-medium px-2 py-1 bg-blue-50 text-blue-700 rounded-lg border border-blue-100">${item.cert}</span>
                        </td>
                        <td class="px-6 py-4">
                            <span class="px-2.5 py-1 rounded-full text-xs font-bold ${item.status === 'Existing' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}">
                                ${item.status === 'Existing' ? 'í™œì„±' : 'ì‹ ê·œ'}
                            </span>
                        </td>
                        ${state.isAdmin ? `
                        <td class="px-6 py-4 text-center">
                            <div class="flex justify-center gap-2">
                                <button onclick="openModal(${originalIdx})" class="p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all"><i data-lucide="edit-3" class="w-4 h-4"></i></button>
                                <button onclick="deleteItem(${originalIdx})" class="p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                            </div>
                        </td>
                        ` : ''}
                    </tr>
                `;
            }).join('');
            
            lucide.createIcons();
        }

        window.onload = render;
    </script>
</body>
</html>